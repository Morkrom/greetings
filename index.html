<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Hello</title>
        <link rel="stylesheet" href="index.css" />
        <script src="app.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>

    <body>
        <div id="app"></div>
        <script>
            var app = Elm.Main.init({
                node: document.getElementById("app"),
                flags: window.innerWidth,
            });

            window.addEventListener("resize", () => {
                app.ports.messageReceiver.send(window.innerWidth);
            });

            if ("IntersectionObserver" in window) {
                let elements = document.querySelectorAll("svg");
                let observer = new IntersectionObserver(
                    (entries) => {
                        for (let entry of entries) {
                            if (entry.isIntersecting) {
                                let beginElements =
                                    entry.target.querySelectorAll(
                                        '[begin="indefinite"]',
                                    );
                                for (let beginEl of beginElements) {
                                    beginEl.beginElement();
                                }
                                observer.unobserve(entry.target);
                            }
                        }
                    },
                    { threshold: 0.5 },
                );

                elements.forEach((elem) => observer.observe(elem));
            }
            /*
	    window.addEventListener('resize', () => {
              console.log('New width: ' + window.innerWidth);
              app.ports.messageReceiver.send(window.innerWidth)
            })*/

            /*function isMobileDevice() {
                const isTouchScreen =
                    "ontouchstart" in window || navigator.maxTouchPoints > 0;
                const isSmallScreen = window.innerWidth < 768;
                return isTouchScreen && isSmallScreen;
            }*/
        </script>
    </body>
</html>
